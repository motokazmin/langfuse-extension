# –î–µ—Ç–∞–ª—å–Ω–∞—è –∫–∞—Ä—Ç–∞ –ø—Ä–æ–µ–∫—Ç–∞ Langfuse Extension

**–î–∞—Ç–∞ –∞–Ω–∞–ª–∏–∑–∞:** 2026-01-24  
**–ê–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä:** AI Code Analyzer  
**–í–µ—Ä—Å–∏—è –ø—Ä–æ–µ–∫—Ç–∞:** 0.0.0

---

## üìä –û–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –Ø–∑—ã–∫ | –§–∞–π–ª—ã | –°—Ç—Ä–æ–∫–∏ –∫–æ–¥–∞ | –¢–µ—Å—Ç—ã |
|-----------|------|-------|-------------|-------|
| ai-back/ | Go | 2 | 743 | ‚ùå 0 |
| crome-ext/ | TypeScript | 6 | ~600 | ‚ùå 0 |
| **–ò–¢–û–ì–û** | - | 8 | ~1343 | ‚ùå 0 |

---

## 1Ô∏è‚É£ –ê–Ω–∞–ª–∏–∑ ai-back/ (Go Backend)

### üìê –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∫–æ–¥–∞

#### ‚ùå –ü–†–û–ë–õ–ï–ú–ê: –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —Å–ª–æ—ë–≤ (handler/service/repository)

**–¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ:**
- –í–µ—Å—å –∫–æ–¥ –≤ 2 —Ñ–∞–π–ª–∞—Ö: `main.go` (350 —Å—Ç—Ä–æ–∫) –∏ `ai/client.go` (395 —Å—Ç—Ä–æ–∫)
- –ù–µ—Ç —Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è –Ω–∞ —Å–ª–æ–∏
- –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ —Å–º–µ—à–∞–Ω–∞ —Å HTTP handlers
- –ü—Ä—è–º—ã–µ –≤—ã–∑–æ–≤—ã –≤–Ω–µ—à–Ω–∏—Ö API –∏–∑ handlers

**–û–∂–∏–¥–∞–µ–º–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ (Clean Architecture):**
```
ai-back/
‚îú‚îÄ‚îÄ cmd/
‚îÇ   ‚îî‚îÄ‚îÄ server/
‚îÇ       ‚îî‚îÄ‚îÄ main.go              # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞
‚îú‚îÄ‚îÄ internal/
‚îÇ   ‚îú‚îÄ‚îÄ handler/                 # HTTP handlers
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ analyze_handler.go
‚îÇ   ‚îú‚îÄ‚îÄ service/                 # –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ trace_service.go
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ai_service.go
‚îÇ   ‚îú‚îÄ‚îÄ repository/              # –í–Ω–µ—à–Ω–∏–µ API
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ langfuse_client.go
‚îÇ   ‚îú‚îÄ‚îÄ domain/                  # –ú–æ–¥–µ–ª–∏
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ trace.go
‚îÇ   ‚îî‚îÄ‚îÄ config/                  # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îÇ       ‚îî‚îÄ‚îÄ config.go
‚îî‚îÄ‚îÄ pkg/
    ‚îî‚îÄ‚îÄ ai/                      # AI –∫–ª–∏–µ–Ω—Ç—ã
        ‚îú‚îÄ‚îÄ interface.go
        ‚îú‚îÄ‚îÄ openrouter.go
        ‚îî‚îÄ‚îÄ ollama.go
```

**–§–∞–∫—Ç–∏—á–µ—Å–∫–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞:**
```
ai-back/
‚îú‚îÄ‚îÄ main.go                      # 350 —Å—Ç—Ä–æ–∫: main + handlers + HTTP client
‚îî‚îÄ‚îÄ ai/
    ‚îî‚îÄ‚îÄ client.go                # 395 —Å—Ç—Ä–æ–∫: AI –∫–ª–∏–µ–Ω—Ç—ã
```

#### üî¥ –ù–∞—Ä—É—à–µ–Ω–∏—è Clean Architecture:

1. **Handler —Å–º–µ—à–∞–Ω —Å main()** (—Å—Ç—Ä–æ–∫–∏ 28-162 –≤ `main.go`)
   - –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è, –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è, —Ä–æ—É—Ç–∏–Ω–≥ ‚Äî –≤—Å—ë –≤ –æ–¥–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–∏

2. **Langfuse API –≤—ã–∑–æ–≤ –≤ handler** (—Å—Ç—Ä–æ–∫–∏ 297-349 –≤ `main.go`)
   - –§—É–Ω–∫—Ü–∏—è `getTraceFromLangfuse()` –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –≤ `repository/`
   - –ü—Ä—è–º–∞—è —Ä–∞–±–æ—Ç–∞ —Å `os.Getenv()` –≤–º–µ—Å—Ç–æ dependency injection

3. **–ù–µ—Ç –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤ –¥–ª—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π**
   - `aiClient` ‚Äî –≥–ª–æ–±–∞–ª—å–Ω–∞—è –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è (—Å—Ç—Ä–æ–∫–∞ 26)
   - –ù–µ–≤–æ–∑–º–æ–∂–Ω–æ –∑–∞–º–æ–∫–∞—Ç—å –¥–ª—è —Ç–µ—Å—Ç–æ–≤

4. **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ domain –º–æ–¥–µ–ª–µ–π**
   - `map[string]interface{}` –≤–º–µ—Å—Ç–æ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Ç–∏–ø–æ–≤
   - –ù–µ—Ç –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö

---

### üö® –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

#### ‚úÖ –•–û–†–û–®–û:

1. **–ö–∞—Å—Ç–æ–º–Ω—ã–π —Ç–∏–ø –æ—à–∏–±–∫–∏** (`ai/client.go`, —Å—Ç—Ä–æ–∫–∏ 19-31)
   ```go
   type AIError struct {
       StatusCode int
       Message    string
       RetryAfter int
   }
   ```
   - –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö
   - –ü–æ–¥–¥–µ—Ä–∂–∫–∞ retry-after –¥–ª—è rate limiting

2. **–û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã—Ö HTTP —Å—Ç–∞—Ç—É—Å–æ–≤** (`main.go`, —Å—Ç—Ä–æ–∫–∏ 198-230)
   - 429 (Rate Limit)
   - 402 (Insufficient Credits)
   - 503 (Service Unavailable)

3. **Retry –ª–æ–≥–∏–∫–∞ –¥–ª—è Langfuse API** (`main.go`, —Å—Ç—Ä–æ–∫–∏ 308-345)
   - 3 –ø–æ–ø—ã—Ç–∫–∏ —Å exponential backoff
   - –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–∞–∂–¥–æ–π –ø–æ–ø—ã—Ç–∫–∏

#### ‚ùå –ü–†–û–ë–õ–ï–ú–´:

1. **–ò–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—à–∏–±–∫–∏ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ HTTP –∑–∞–ø—Ä–æ—Å–∞** (`main.go`, —Å—Ç—Ä–æ–∫–∞ 316)
   ```go
   req, _ := http.NewRequest("GET", url, nil)  // ‚ùå –û—à–∏–±–∫–∞ –∏–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç—Å—è
   ```
   **–†–∏—Å–∫:** –ü–∞–Ω–∏–∫–∞ –ø—Ä–∏ –Ω–µ–≤–∞–ª–∏–¥–Ω–æ–º URL

2. **–î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –ª–æ–≥–∏–∫–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫** (`main.go`, —Å—Ç—Ä–æ–∫–∏ 198-258)
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ `errors.As()` –¥–ª—è `AIError`
   - –ó–∞—Ç–µ–º fallback –Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫—É —Ç–µ–∫—Å—Ç–∞ –æ—à–∏–±–∫–∏
   - 60 —Å—Ç—Ä–æ–∫ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–Ω–æ–π –ª–æ–≥–∏–∫–∏

3. **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏**
   ```go
   return fmt.Errorf("–æ—à–∏–±–∫–∞ –ø—Ä–∏ –º–∞—Ä—à–∞–ª–∏–Ω–≥–µ traceData: %w", err)
   ```
   - –ù–µ—Ç trace ID –≤ —Å–æ–æ–±—â–µ–Ω–∏–∏
   - –°–ª–æ–∂–Ω–æ –æ—Ç—Å–ª–µ–¥–∏—Ç—å –ø—Ä–æ–±–ª–µ–º—É –≤ –ª–æ–≥–∞—Ö

4. **–ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ defer** (`main.go`, —Å—Ç—Ä–æ–∫–∞ 325)
   ```go
   defer resp.Body.Close()  // ‚ùå –í —Ü–∏–∫–ª–µ ‚Äî —É—Ç–µ—á–∫–∞ —Ä–µ—Å—É—Ä—Å–æ–≤
   ```
   **–ü—Ä–æ–±–ª–µ–º–∞:** `defer` –≤—ã–ø–æ–ª–Ω–∏—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ –≤—ã—Ö–æ–¥–∞ –∏–∑ —Ñ—É–Ω–∫—Ü–∏–∏, –Ω–µ –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–π –∏—Ç–µ—Ä–∞—Ü–∏–∏

5. **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –æ–±—ë—Ä—Ç–∫–∏ –æ—à–∏–±–æ–∫ —Å –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º**
   - –ù–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è `fmt.Errorf("context: %w", err)` –¥–ª—è —Ü–µ–ø–æ—á–∫–∏ –æ—à–∏–±–æ–∫

#### üü° –ö–ê–ß–ï–°–¢–í–û: 6/10
- –ë–∞–∑–æ–≤–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –µ—Å—Ç—å
- –ù–µ—Ç —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã
- –ú–Ω–æ–≥–æ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è
- –ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ —É—Ç–µ—á–∫–∏ —Ä–µ—Å—É—Ä—Å–æ–≤

---

### üß™ –¢–µ—Å—Ç—ã

#### ‚ùå –ö–†–ò–¢–ò–ß–ï–°–ö–ê–Ø –ü–†–û–ë–õ–ï–ú–ê: –ü–æ–ª–Ω–æ–µ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —Ç–µ—Å—Ç–æ–≤

**–ù–∞–π–¥–µ–Ω–æ —Ç–µ—Å—Ç–æ–≤:** 0  
**–ü–æ–∫—Ä—ã—Ç–∏–µ –∫–æ–¥–∞:** 0%

**–û—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç:**
- ‚ùå Unit —Ç–µ—Å—Ç—ã –¥–ª—è handlers
- ‚ùå Unit —Ç–µ—Å—Ç—ã –¥–ª—è AI –∫–ª–∏–µ–Ω—Ç–æ–≤
- ‚ùå Integration —Ç–µ—Å—Ç—ã –¥–ª—è Langfuse API
- ‚ùå –¢–µ—Å—Ç—ã –¥–ª—è retry –ª–æ–≥–∏–∫–∏
- ‚ùå –¢–µ—Å—Ç—ã –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫
- ‚ùå –¢–µ—Å—Ç—ã –¥–ª—è CORS –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

**–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏ –±–µ–∑ —Ç–µ—Å—Ç–æ–≤:**

1. `handleAnalyzeRequest()` ‚Äî –æ—Å–Ω–æ–≤–Ω–æ–π handler (115 —Å—Ç—Ä–æ–∫)
2. `getTraceFromLangfuse()` ‚Äî HTTP –∫–ª–∏–µ–Ω—Ç —Å retry (53 —Å—Ç—Ä–æ–∫–∏)
3. `AnalyzeTrace()` ‚Äî AI –∞–Ω–∞–ª–∏–∑ (OpenRouter + Ollama)
4. `extractRetryAfter()` ‚Äî –ø–∞—Ä—Å–∏–Ω–≥ retry –≤—Ä–µ–º–µ–Ω–∏ (43 —Å—Ç—Ä–æ–∫–∏)

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:**

```go
// –ü—Ä–∏–º–µ—Ä: ai-back/handler/analyze_handler_test.go
func TestHandleAnalyzeRequest_Success(t *testing.T) {
    mockAIClient := &MockAIClient{}
    mockLangfuseRepo := &MockLangfuseRepo{}
    
    handler := NewAnalyzeHandler(mockAIClient, mockLangfuseRepo)
    
    // Test implementation...
}

// –ü—Ä–∏–º–µ—Ä: ai-back/ai/client_test.go
func TestOpenAIClient_AnalyzeTrace_RateLimit(t *testing.T) {
    // Test 429 handling...
}
```

#### üü° –ö–ê–ß–ï–°–¢–í–û: 0/10 (–Ω–µ—Ç —Ç–µ—Å—Ç–æ–≤)

---

### üí£ Tech Debt –∏ –ø—Ä–æ–±–ª–µ–º—ã

#### 1. **–ì–ª–æ–±–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ**
```go
var aiClient ai.AIClient  // —Å—Ç—Ä–æ–∫–∞ 26 –≤ main.go
```
- –ù–µ–≤–æ–∑–º–æ–∂–Ω–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å
- –ù–∞—Ä—É—à–µ–Ω–∏–µ dependency injection
- –ü—Ä–æ–±–ª–µ–º—ã —Å concurrent —Ç–µ—Å—Ç–∞–º–∏

#### 2. **–ú–∞–≥–∏—á–µ—Å–∫–∏–µ —á–∏—Å–ª–∞ –∏ —Å—Ç—Ä–æ–∫–∏**
```go
maxTokens = 1000           // —Å—Ç—Ä–æ–∫–∞ 107
timeout := 30 * time.Second // —Å—Ç—Ä–æ–∫–∞ 306
for attempt := 1; attempt <= 3; attempt++ // —Å—Ç—Ä–æ–∫–∞ 310
```
- –î–æ–ª–∂–Ω—ã –±—ã—Ç—å –∫–æ–Ω—Å—Ç–∞–Ω—Ç–∞–º–∏ –∏–ª–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π

#### 3. **–§—É–Ω–∫—Ü–∏—è `main()` –Ω–∞ 135 —Å—Ç—Ä–æ–∫** (—Å—Ç—Ä–æ–∫–∏ 28-162)
- –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
- –°–æ–∑–¥–∞–Ω–∏–µ AI –∫–ª–∏–µ–Ω—Ç–∞
- –ù–∞—Å—Ç—Ä–æ–π–∫–∞ CORS
- –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞
- **–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –†–∞–∑–±–∏—Ç—å –Ω–∞ –æ—Ç–¥–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏

#### 4. **–§—É–Ω–∫—Ü–∏—è `handleAnalyzeRequest()` –Ω–∞ 115 —Å—Ç—Ä–æ–∫** (—Å—Ç—Ä–æ–∫–∏ 164-278)
- –ü–∞—Ä—Å–∏–Ω–≥ –∑–∞–ø—Ä–æ—Å–∞
- –ü–æ–ª—É—á–µ–Ω–∏–µ —Ç—Ä–µ–π—Å–∞
- AI –∞–Ω–∞–ª–∏–∑
- –û–±—Ä–∞–±–æ—Ç–∫–∞ 5 —Ç–∏–ø–æ–≤ –æ—à–∏–±–æ–∫
- **–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –í—ã–¥–µ–ª–∏—Ç—å service layer

#### 5. **–î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å—Ç—Ä–æ–∫** (—Å—Ç—Ä–æ–∫–∏ 281-295)
```go
func contains(s, substr string) bool { ... }
func containsHelper(s, substr string) bool { ... }
```
- –ú–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `strings.Contains()`

#### 6. **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ graceful shutdown**
```go
router.Run(":8080")  // –ë–ª–æ–∫–∏—Ä—É–µ—Ç –Ω–∞–≤—Å–µ–≥–¥–∞
```
- –ù–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∫–∏ SIGTERM/SIGINT
- –ù–µ–≤–æ–∑–º–æ–∂–Ω–æ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –∑–∞–≤–µ—Ä—à–∏—Ç—å —Ä–∞–±–æ—Ç—É

#### 7. **–•–∞—Ä–¥–∫–æ–¥ –ø–æ—Ä—Ç–∞**
```go
router.Run(":8080")  // —Å—Ç—Ä–æ–∫–∞ 161
```
- –î–æ–ª–∂–µ–Ω —á–∏—Ç–∞—Ç—å—Å—è –∏–∑ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

#### 8. **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è**
```go
log.Println("üöÄ Go-—Å–µ—Ä–≤–∏—Å –∑–∞–ø—É—â–µ–Ω...")
```
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π `log`
- –ù–µ—Ç —É—Ä–æ–≤–Ω–µ–π (DEBUG, INFO, ERROR)
- –ù–µ—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –ø–æ–ª–µ–π
- **–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `zap` –∏–ª–∏ `zerolog`

#### 9. **–ù–µ—ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã–π –ø–æ–¥—Å—á—ë—Ç —Ä–∞–∑–º–µ—Ä–∞ –¥–∞–Ω–Ω—ã—Ö** (—Å—Ç—Ä–æ–∫–∞ 190)
```go
len(fmt.Sprintf("%v", traceData))  // ‚ùå –°–æ–∑–¥–∞—ë—Ç —Å—Ç—Ä–æ–∫—É –¥–ª—è –ø–æ–¥—Å—á—ë—Ç–∞ –±–∞–π—Ç
```

#### 10. **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ middleware –¥–ª—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤**
- –ù–µ—Ç –ª–æ–≥–æ–≤ –≤—Ä–µ–º–µ–Ω–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
- –ù–µ—Ç –ª–æ–≥–æ–≤ —Ä–∞–∑–º–µ—Ä–∞ –æ—Ç–≤–µ—Ç–∞
- –ù–µ—Ç correlation ID

---

### üìù –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

#### ‚úÖ –•–û–†–û–®–û:
- –û—Ç–ª–∏—á–Ω—ã–π README.md (530 —Å—Ç—Ä–æ–∫)
- –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
- Troubleshooting —Å–µ–∫—Ü–∏—è

#### ‚ùå –ü–†–û–ë–õ–ï–ú–´:
- –ù–µ—Ç Godoc –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤ –¥–ª—è —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ–º—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π
- –ù–µ—Ç inline –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤ –≤ —Å–ª–æ–∂–Ω—ã—Ö –º–µ—Å—Ç–∞—Ö
- –ù–µ—Ç –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–æ–π –¥–∏–∞–≥—Ä–∞–º–º—ã

---

## 2Ô∏è‚É£ –ê–Ω–∞–ª–∏–∑ crome-ext/ (Chrome Extension)

### üìê –°—Ç—Ä—É–∫—Ç—É—Ä–∞ TypeScript –∫–æ–¥–∞

#### ‚úÖ –•–û–†–û–®–û:

1. **–ú–æ–¥—É–ª—å–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞**
   ```
   src/
   ‚îú‚îÄ‚îÄ background/index.ts       # Service worker
   ‚îú‚îÄ‚îÄ content-script/
   ‚îÇ   ‚îú‚îÄ‚îÄ injector.ts           # –û—Å–Ω–æ–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞ (492 —Å—Ç—Ä–æ–∫–∏)
   ‚îÇ   ‚îî‚îÄ‚îÄ App.tsx               # React –∫–æ–º–ø–æ–Ω–µ–Ω—Ç (–Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è)
   ‚îî‚îÄ‚îÄ App.tsx                   # Popup UI
   ```

2. **Strict mode –≤–∫–ª—é—á–µ–Ω** (`tsconfig.json`, —Å—Ç—Ä–æ–∫–∞ 18)
   ```json
   "strict": true
   ```

3. **TypeScript 5.9.3** ‚Äî —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è

#### ‚ùå –ü–†–û–ë–õ–ï–ú–´:

1. **–ù–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–π –∫–æ–¥**
   - `content-script/App.tsx` (47 —Å—Ç—Ä–æ–∫) ‚Äî –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è
   - `src/App.tsx` (23 —Å—Ç—Ä–æ–∫–∏) ‚Äî popup UI, –Ω–æ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –≤ injector
   - `src/main.tsx` ‚Äî —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞ –¥–ª—è popup, –Ω–æ –æ—Å–Ω–æ–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞ –≤ content script

2. **–ú–æ–Ω–æ–ª–∏—Ç–Ω—ã–π —Ñ–∞–π–ª `injector.ts`** (492 —Å—Ç—Ä–æ–∫–∏)
   - –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ trace ID
   - UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã (–ø—Ä–æ–≥—Ä–µ—Å—Å, –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ)
   - HTTP –∑–∞–ø—Ä–æ—Å—ã
   - –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–±—ã—Ç–∏–π
   - **–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –†–∞–∑–±–∏—Ç—å –Ω–∞ –º–æ–¥—É–ª–∏

3. **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —Ç–∏–ø–æ–≤ –¥–ª—è Chrome API**
   - –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —Ç–∏–ø—ã –∏–∑ `@types/chrome`
   - –ù–æ –Ω–µ—Ç –æ–±—ë—Ä—Ç–æ–∫ —Å error handling

---

### üî§ –¢–∏–ø–∏–∑–∞—Ü–∏—è

#### ‚úÖ –•–û–†–û–®–û:

1. **–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã –¥–ª—è —Å–æ–æ–±—â–µ–Ω–∏–π** (`background/index.ts`, —Å—Ç—Ä–æ–∫–∏ 6-19)
   ```typescript
   interface AnalyzeTraceMessage {
     type: "ANALYZE_TRACE";
     traceId: string;
     timestamp: string;
   }
   ```

2. **–¢–∏–ø–∏–∑–∞—Ü–∏—è —Ñ—É–Ω–∫—Ü–∏–π**
   ```typescript
   const extractTraceId = (): string | null => { ... }
   const displayAnalysisResults = (response: any, traceId: string): void => { ... }
   ```

#### ‚ùå –ü–†–û–ë–õ–ï–ú–´:

1. **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `any`** (`injector.ts`, —Å—Ç—Ä–æ–∫–∞ 123)
   ```typescript
   const displayAnalysisResults = (response: any, traceId: string): void => {
   ```
   **–ü—Ä–æ–±–ª–µ–º–∞:** –ù–µ—Ç —Ç–∏–ø–∏–∑–∞—Ü–∏–∏ –æ—Ç–≤–µ—Ç–∞ –æ—Ç backend
   
   **–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:**
   ```typescript
   interface AnalysisResponse {
     data: {
       analysisSummary: {
         traceId: string;
         overallStatus: 'HEALTHY' | 'WARNING' | 'ERROR';
         keyFinding: string;
       };
       detailedAnalysis: {
         anomalyType: 'NONE' | 'ERROR' | 'PERFORMANCE_BOTTLENECK' | 'HIGH_COST' | 'LOGICAL_LOOP';
         description: string;
         rootCause: string;
         recommendation: string;
       };
     };
   }
   ```

2. **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —Ç–∏–ø–æ–≤ –¥–ª—è DOM —ç–ª–µ–º–µ–Ω—Ç–æ–≤**
   ```typescript
   const button = document.querySelector(`#${APP_ROOT_ID} button`) as HTMLButtonElement;
   ```
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `as` –≤–º–µ—Å—Ç–æ type guard
   - –ù–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω–∞ `null`

3. **–ù–µ—è–≤–Ω—ã–µ —Ç–∏–ø—ã –≤ –æ–±—ä–µ–∫—Ç–∞—Ö**
   ```typescript
   const statusColors: Record<string, string> = { ... }  // —Å—Ç—Ä–æ–∫–∞ 160
   ```
   - –ú–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å enum –∏–ª–∏ union type

#### üü° –ö–ê–ß–ï–°–¢–í–û: 7/10
- –í –æ—Å–Ω–æ–≤–Ω–æ–º —Ö–æ—Ä–æ—à–∞—è —Ç–∏–ø–∏–∑–∞—Ü–∏—è
- 1 –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `any`
- –ú–æ–∂–Ω–æ —É–ª—É—á—à–∏—Ç—å —Å –ø–æ–º–æ—â—å—é –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤

---

### üö® –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

#### ‚úÖ –•–û–†–û–®–û:

1. **Try-catch –±–ª–æ–∫–∏** (`injector.ts`, —Å—Ç—Ä–æ–∫–∏ 304-307, 343-346)
   ```typescript
   try {
     // ...
   } catch (error) {
     console.error("AI-Analyzer: Exception in sendAnalyzeRequest:", error);
     alert(`‚ùå –ò—Å–∫–ª—é—á–µ–Ω–∏–µ: ${error instanceof Error ? error.message : String(error)}`);
   }
   ```

2. **–ü—Ä–æ–≤–µ—Ä–∫–∞ Chrome runtime errors** (`injector.ts`, —Å—Ç—Ä–æ–∫–∏ 280-284)
   ```typescript
   if (chrome.runtime.lastError) {
     console.error("AI-Analyzer: Chrome runtime error:", chrome.runtime.lastError.message);
     alert(`‚ùå –û—à–∏–±–∫–∞ —Å–≤—è–∑–∏ —Å —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ–º: ${chrome.runtime.lastError.message}`);
     return;
   }
   ```

3. **–û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã—Ö —Å—Ç–∞—Ç—É—Å–æ–≤** (`background/index.ts`, —Å—Ç—Ä–æ–∫–∏ 72-86)
   - 429 Rate Limit
   - 402 Payment Required

#### ‚ùå –ü–†–û–ë–õ–ï–ú–´:

1. **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `alert()` –¥–ª—è –æ—à–∏–±–æ–∫**
   ```typescript
   alert(`‚ùå –û—à–∏–±–∫–∞: ${response.error}`);  // —Å—Ç—Ä–æ–∫–∞ 296
   ```
   - –ü–ª–æ—Ö–æ–π UX
   - –ë–ª–æ–∫–∏—Ä—É–µ—Ç UI
   - **–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å toast notifications

2. **–ù–µ—Ç —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫**
   - –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ä–∞–∑–±—Ä–æ—Å–∞–Ω–∞ –ø–æ –∫–æ–¥—É
   - –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –ª–æ–≥–∏–∫–∏

3. **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ error boundaries** (–¥–ª—è React –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤)

4. **–ù–µ—Ç retry –ª–æ–≥–∏–∫–∏ –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ**
   - –ü—Ä–∏ 429 –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –æ—à–∏–±–∫–∞
   - –ú–æ–∂–Ω–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–≤—Ç–æ—Ä–∏—Ç—å —á–µ—Ä–µ–∑ `retryAfter` —Å–µ–∫—É–Ω–¥

5. **–ù–µ—Ç –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –æ—Ç–≤–µ—Ç–∞ –æ—Ç backend**
   ```typescript
   if (response.data) {  // —Å—Ç—Ä–æ–∫–∞ 290
     displayAnalysisResults(response, traceId);
   }
   ```
   - –ù–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã `response.data`
   - –ú–æ–∂–µ—Ç —É–ø–∞—Å—Ç—å –ø—Ä–∏ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–∏

#### üü° –ö–ê–ß–ï–°–¢–í–û: 6/10
- –ë–∞–∑–æ–≤–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –µ—Å—Ç—å
- –ü–ª–æ—Ö–æ–π UX (alert)
- –ù–µ—Ç —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–∞—Ü–∏–∏

---

### üß™ –¢–µ—Å—Ç—ã

#### ‚ùå –ö–†–ò–¢–ò–ß–ï–°–ö–ê–Ø –ü–†–û–ë–õ–ï–ú–ê: –ü–æ–ª–Ω–æ–µ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —Ç–µ—Å—Ç–æ–≤

**–ù–∞–π–¥–µ–Ω–æ —Ç–µ—Å—Ç–æ–≤:** 0  
**–ü–æ–∫—Ä—ã—Ç–∏–µ –∫–æ–¥–∞:** 0%

**–û—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç:**
- ‚ùå Unit —Ç–µ—Å—Ç—ã –¥–ª—è —Ñ—É–Ω–∫—Ü–∏–π
- ‚ùå –¢–µ—Å—Ç—ã –¥–ª—è extractTraceId()
- ‚ùå –¢–µ—Å—Ç—ã –¥–ª—è message passing
- ‚ùå E2E —Ç–µ—Å—Ç—ã –¥–ª—è —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è
- ‚ùå –¢–µ—Å—Ç—ã –¥–ª—è UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

**–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏ –±–µ–∑ —Ç–µ—Å—Ç–æ–≤:**

1. `extractTraceId()` ‚Äî –ø–∞—Ä—Å–∏–Ω–≥ URL (64 —Å—Ç—Ä–æ–∫–∏)
2. `sendAnalyzeRequest()` ‚Äî HTTP –∑–∞–ø—Ä–æ—Å (56 —Å—Ç—Ä–æ–∫)
3. `displayAnalysisResults()` ‚Äî —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥ UI (126 —Å—Ç—Ä–æ–∫)
4. `tryInjectApp()` ‚Äî –≤–Ω–µ–¥—Ä–µ–Ω–∏–µ –∫–Ω–æ–ø–∫–∏ (98 —Å—Ç—Ä–æ–∫)

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:**

```typescript
// –ü—Ä–∏–º–µ—Ä: src/content-script/__tests__/injector.test.ts
describe('extractTraceId', () => {
  it('should extract trace ID from peek parameter', () => {
    // Mock window.location
    Object.defineProperty(window, 'location', {
      value: { href: 'https://cloud.langfuse.com/traces?peek=trace-123' }
    });
    
    expect(extractTraceId()).toBe('trace-123');
  });
  
  it('should return null for invalid URL', () => {
    Object.defineProperty(window, 'location', {
      value: { href: 'https://cloud.langfuse.com/dashboard' }
    });
    
    expect(extractTraceId()).toBeNull();
  });
});
```

#### üü° –ö–ê–ß–ï–°–¢–í–û: 0/10 (–Ω–µ—Ç —Ç–µ—Å—Ç–æ–≤)

---

### üí£ Tech Debt –∏ –ø—Ä–æ–±–ª–µ–º—ã

#### 1. **–ú–æ–Ω–æ–ª–∏—Ç–Ω—ã–π —Ñ–∞–π–ª `injector.ts`** (492 —Å—Ç—Ä–æ–∫–∏)
- –°–º–µ—à–∞–Ω—ã: UI, –ª–æ–≥–∏–∫–∞, HTTP, DOM manipulation
- **–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –†–∞–∑–±–∏—Ç—å –Ω–∞ –º–æ–¥—É–ª–∏:
  ```
  content-script/
  ‚îú‚îÄ‚îÄ injector.ts           # –û—Å–Ω–æ–≤–Ω–æ–π —Ñ–∞–π–ª (orchestrator)
  ‚îú‚îÄ‚îÄ trace-extractor.ts    # extractTraceId()
  ‚îú‚îÄ‚îÄ ui/
  ‚îÇ   ‚îú‚îÄ‚îÄ button.ts         # –°–æ–∑–¥–∞–Ω–∏–µ –∫–Ω–æ–ø–∫–∏
  ‚îÇ   ‚îú‚îÄ‚îÄ modal.ts          # –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ
  ‚îÇ   ‚îî‚îÄ‚îÄ progress.ts       # –ü—Ä–æ–≥—Ä–µ—Å—Å –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä
  ‚îî‚îÄ‚îÄ api/
      ‚îî‚îÄ‚îÄ backend-client.ts # HTTP –∑–∞–ø—Ä–æ—Å—ã
  ```

#### 2. **Polling URL –∫–∞–∂–¥—ã–µ 100ms** (`injector.ts`, —Å—Ç—Ä–æ–∫–∏ 466-476)
```typescript
new MutationObserver(() => {
  if (location.href !== lastUrl) {
    lastUrl = location.href;
    setTimeout(tryInjectApp, 100);
  }
}).observe(document.body, { childList: true, subtree: true });
```
- –ù–µ—ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ: –ø—Ä–æ–≤–µ—Ä–∫–∞ –≤—Å–µ–≥–æ DOM
- **–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `popstate` event –∏–ª–∏ History API

#### 3. **Inline —Å—Ç–∏–ª–∏** (—Å—Ç—Ä–æ–∫–∏ 75-105, 133-152, 394-405)
```typescript
progressDiv.style.position = 'fixed';
progressDiv.style.top = '160px';
// ... 20+ —Å—Ç—Ä–æ–∫ —Å—Ç–∏–ª–µ–π
```
- –ü–ª–æ—Ö–∞—è –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º–æ—Å—Ç—å
- –ù–µ—Ç –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
- **–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** CSS-in-JS –∏–ª–∏ –æ—Ç–¥–µ–ª—å–Ω—ã–π CSS —Ñ–∞–π–ª

#### 4. **–•–∞—Ä–¥–∫–æ–¥ URL backend** (`background/index.ts`, —Å—Ç—Ä–æ–∫–∞ 53)
```typescript
fetch("http://localhost:8080/analyze", { ... })
```
- –î–æ–ª–∂–µ–Ω –±—ã—Ç—å –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
- –ù–µ–≤–æ–∑–º–æ–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å –±–µ–∑ –ø–µ—Ä–µ—Å–±–æ—Ä–∫–∏

#### 5. **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ debounce –¥–ª—è –∫–Ω–æ–ø–∫–∏**
```typescript
button.onclick = handleAnalyzeClick;  // —Å—Ç—Ä–æ–∫–∞ 438
```
- –ú–æ–∂–Ω–æ –∫–ª–∏–∫–Ω—É—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–∞–∑
- –û—Ç–ø—Ä–∞–≤–∏—Ç—Å—è –Ω–µ—Å–∫–æ–ª—å–∫–æ –∑–∞–ø—Ä–æ—Å–æ–≤
- **–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –î–æ–±–∞–≤–∏—Ç—å debounce –∏–ª–∏ disabled state

#### 6. **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ trace ID** (`injector.ts`, —Å—Ç—Ä–æ–∫–∞ 7)
```typescript
let cachedTraceId: string | null = null;
```
- –ì–ª–æ–±–∞–ª—å–Ω–∞—è –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è
- –ú–æ–∂–µ—Ç —É—Å—Ç–∞—Ä–µ—Ç—å
- –ù–µ—Ç TTL

#### 7. **–ù–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–π React –∫–æ–¥**
- `content-script/App.tsx` ‚Äî 47 —Å—Ç—Ä–æ–∫ –º—ë—Ä—Ç–≤–æ–≥–æ –∫–æ–¥–∞
- `ShadowDomWrapper` ‚Äî –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ production
- **–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –£–¥–∞–ª–∏—Ç—å –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å

#### 8. **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ error tracking**
- –ù–µ—Ç –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å Sentry/Rollbar
- –û—à–∏–±–∫–∏ —Ç–æ–ª—å–∫–æ –≤ console.error
- –ù–µ–≤–æ–∑–º–æ–∂–Ω–æ –æ—Ç—Å–ª–µ–¥–∏—Ç—å –ø—Ä–æ–±–ª–µ–º—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

#### 9. **–ù–µ—Ç –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è API**
```typescript
fetch("http://localhost:8080/analyze", { ... })
```
- –î–æ–ª–∂–Ω–æ –±—ã—Ç—å `/api/v1/analyze`

#### 10. **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ loading state –¥–ª—è –∫–Ω–æ–ø–∫–∏**
```typescript
button.textContent = '‚è≥ –ê–Ω–∞–ª–∏–∑...';
button.disabled = true;
```
- –°–æ—Å—Ç–æ—è–Ω–∏–µ –Ω–µ –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –ø—Ä–∏ –æ—à–∏–±–∫–µ –≤ –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö —Å–ª—É—á–∞—è—Ö

---

### üìù –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

#### ‚úÖ –•–û–†–û–®–û:
- –û—Ç–ª–∏—á–Ω—ã–π README.md (412 —Å—Ç—Ä–æ–∫)
- –ü–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ —É—Å—Ç–∞–Ω–æ–≤–∫–µ
- Troubleshooting

#### ‚ùå –ü–†–û–ë–õ–ï–ú–´:
- –ù–µ—Ç JSDoc –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤ –¥–ª—è —Ñ—É–Ω–∫—Ü–∏–π
- –ù–µ—Ç –æ–ø–∏—Å–∞–Ω–∏—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è
- –ù–µ—Ç –¥–∏–∞–≥—Ä–∞–º–º—ã message flow

---

## 3Ô∏è‚É£ –û–±—â–∏–µ –ø—Ä–æ–±–ª–µ–º—ã –ø—Ä–æ–µ–∫—Ç–∞

### üîÑ –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞

#### 1. **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ AI –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞** (–¥—É–±–ª–∏—Ä—É–µ—Ç—Å—è –≤ Go –∏ TS)

**Go** (`main.go`, —Å—Ç—Ä–æ–∫–∏ 198-258):
```go
switch aiErr.StatusCode {
case 429:
    c.JSON(http.StatusTooManyRequests, gin.H{
        "error": "–°–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ –∑–∞–ø—Ä–æ—Å–æ–≤...",
        "code": "RATE_LIMIT",
    })
case 402:
    c.JSON(http.StatusPaymentRequired, gin.H{
        "error": "–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –∫—Ä–µ–¥–∏—Ç–æ–≤...",
        "code": "INSUFFICIENT_CREDITS",
    })
}
```

**TypeScript** (`background/index.ts`, —Å—Ç—Ä–æ–∫–∏ 72-86):
```typescript
if (status === 429) {
  sendResponse({
    error: `‚è±Ô∏è –°–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ –∑–∞–ø—Ä–æ—Å–æ–≤...`
  });
}
if (status === 402) {
  sendResponse({
    error: "üí≥ –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –∫—Ä–µ–¥–∏—Ç–æ–≤..."
  });
}
```

**–ü—Ä–æ–±–ª–µ–º–∞:** –õ–æ–≥–∏–∫–∞ –¥—É–±–ª–∏—Ä—É–µ—Ç—Å—è, —Å–æ–æ–±—â–µ–Ω–∏—è –º–æ–≥—É—Ç —Ä–∞—Å—Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å—Å—è

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** Backend –¥–æ–ª–∂–µ–Ω –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∫–æ–¥—ã –æ—à–∏–±–æ–∫, frontend ‚Äî —Ç–æ–ª—å–∫–æ –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å

---

#### 2. **–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ –æ—Ç–≤–µ—Ç–∞**

**Go** (`main.go`, —Å—Ç—Ä–æ–∫–∏ 329-334):
```go
if resp.StatusCode != http.StatusOK {
    bodyBytes, _ := io.ReadAll(resp.Body)
    log.Printf("‚ö†Ô∏è  –¢–µ–ª–æ –æ—Ç–≤–µ—Ç–∞: %s", string(bodyBytes))
    lastErr = fmt.Errorf("Langfuse API –≤–µ—Ä–Ω—É–ª —Å—Ç–∞—Ç—É—Å: %s", resp.Status)
    continue
}
```

**TypeScript** (`background/index.ts`, —Å—Ç—Ä–æ–∫–∏ 87-89):
```typescript
if (status !== 200) {
  throw new Error(data.error || `HTTP ${status}`);
}
```

**–ü—Ä–æ–±–ª–µ–º–∞:** –†–∞–∑–Ω–∞—è –ª–æ–≥–∏–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ–¥–Ω–∏—Ö –∏ —Ç–µ—Ö –∂–µ —Å—Ç–∞—Ç—É—Å–æ–≤

---

#### 3. **Retry –ª–æ–≥–∏–∫–∞**

**Go** (`main.go`, —Å—Ç—Ä–æ–∫–∏ 308-345):
- 3 –ø–æ–ø—ã—Ç–∫–∏
- Exponential backoff
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

**TypeScript** (`background/index.ts`):
- –ù–µ—Ç retry
- –¢–æ–ª—å–∫–æ –ø–æ–∫–∞–∑ –æ—à–∏–±–∫–∏

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –î–æ–±–∞–≤–∏—Ç—å retry –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ –∏–ª–∏ –¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–æ—á–µ–º—É –µ–≥–æ –Ω–µ—Ç

---

### üìè –°–ª–æ–∂–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ (>50 —Å—Ç—Ä–æ–∫)

#### Go (ai-back/)

| –§—É–Ω–∫—Ü–∏—è | –§–∞–π–ª | –°—Ç—Ä–æ–∫–∏ | –°–ª–æ–∂–Ω–æ—Å—Ç—å | –ü—Ä–æ–±–ª–µ–º–∞ |
|---------|------|--------|-----------|----------|
| `main()` | main.go | 135 | üî¥ –í—ã—Å–æ–∫–∞—è | –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è + –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è + —Ä–æ—É—Ç–∏–Ω–≥ |
| `handleAnalyzeRequest()` | main.go | 115 | üî¥ –í—ã—Å–æ–∫–∞—è | Handler + –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ + –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ |
| `getTraceFromLangfuse()` | main.go | 53 | üü° –°—Ä–µ–¥–Ω—è—è | HTTP client + retry + –ø–∞—Ä—Å–∏–Ω–≥ |
| `AnalyzeTrace()` (OpenAI) | ai/client.go | 59 | üü° –°—Ä–µ–¥–Ω—è—è | AI –∑–∞–ø—Ä–æ—Å + –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ |
| `AnalyzeTrace()` (Ollama) | ai/client.go | 75 | üü° –°—Ä–µ–¥–Ω—è—è | AI –∑–∞–ø—Ä–æ—Å + –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ |
| `extractRetryAfter()` | ai/client.go | 43 | üü° –°—Ä–µ–¥–Ω—è—è | –ü–∞—Ä—Å–∏–Ω–≥ —Å—Ç—Ä–æ–∫ (3 –ø–∞—Ç—Ç–µ—Ä–Ω–∞) |

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:**
- `main()` ‚Üí —Ä–∞–∑–±–∏—Ç—å –Ω–∞ `initConfig()`, `setupRouter()`, `startServer()`
- `handleAnalyzeRequest()` ‚Üí –≤—ã–¥–µ–ª–∏—Ç—å service layer
- `extractRetryAfter()` ‚Üí –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å regexp

---

#### TypeScript (crome-ext/)

| –§—É–Ω–∫—Ü–∏—è | –§–∞–π–ª | –°—Ç—Ä–æ–∫–∏ | –°–ª–æ–∂–Ω–æ—Å—Ç—å | –ü—Ä–æ–±–ª–µ–º–∞ |
|---------|------|--------|-----------|----------|
| `displayAnalysisResults()` | injector.ts | 126 | üî¥ –í—ã—Å–æ–∫–∞—è | –°–æ–∑–¥–∞–Ω–∏–µ UI + —Å—Ç–∏–ª–∏ + –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ |
| `tryInjectApp()` | injector.ts | 98 | üî¥ –í—ã—Å–æ–∫–∞—è | –ü—Ä–æ–≤–µ—Ä–∫–∏ + —Å–æ–∑–¥–∞–Ω–∏–µ DOM + —Å—Ç–∏–ª–∏ |
| `extractTraceId()` | injector.ts | 64 | üü° –°—Ä–µ–¥–Ω—è—è | –ü–∞—Ä—Å–∏–Ω–≥ URL (3 –≤–∞—Ä–∏–∞–Ω—Ç–∞) |
| `sendAnalyzeRequest()` | injector.ts | 56 | üü° –°—Ä–µ–¥–Ω—è—è | HTTP + –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—Ç–≤–µ—Ç–∞ |

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:**
- `displayAnalysisResults()` ‚Üí —Ä–∞–∑–±–∏—Ç—å –Ω–∞ `createModal()` + `renderAnalysis()`
- `tryInjectApp()` ‚Üí –≤—ã–¥–µ–ª–∏—Ç—å `createButton()`, `injectButton()`
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å React –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –≤–º–µ—Å—Ç–æ —Ä—É—á–Ω–æ–≥–æ —Å–æ–∑–¥–∞–Ω–∏—è DOM

---

### üìö Missing Documentation

#### ‚ùå –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç:

1. **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–∞—è –¥–∏–∞–≥—Ä–∞–º–º–∞**
   - –ù–µ—Ç –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
   - –ù–µ–ø–æ–Ω—è—Ç–µ–Ω flow –¥–∞–Ω–Ω—ã—Ö

2. **API –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**
   - –ù–µ—Ç OpenAPI/Swagger —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏
   - –ù–µ—Ç –ø—Ä–∏–º–µ—Ä–æ–≤ –∑–∞–ø—Ä–æ—Å–æ–≤/–æ—Ç–≤–µ—Ç–æ–≤ –≤ –∫–æ–¥–µ

3. **Inline –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –≤ —Å–ª–æ–∂–Ω—ã—Ö –º–µ—Å—Ç–∞—Ö**
   - `extractRetryAfter()` ‚Äî —Å–ª–æ–∂–Ω–∞—è –ª–æ–≥–∏–∫–∞ –ø–∞—Ä—Å–∏–Ω–≥–∞
   - `handleAnalyzeRequest()` ‚Äî 115 —Å—Ç—Ä–æ–∫ –±–µ–∑ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤
   - `displayAnalysisResults()` ‚Äî 126 —Å—Ç—Ä–æ–∫ HTML –≤ —Å—Ç—Ä–æ–∫–µ

4. **Godoc –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏** (Go)
   ```go
   // ‚ùå –ù–ï–¢
   func getTraceFromLangfuse(traceID string) (map[string]interface{}, error) {
   
   // ‚úÖ –î–û–õ–ñ–ù–û –ë–´–¢–¨
   // getTraceFromLangfuse fetches trace data from Langfuse API.
   // It retries up to 3 times with exponential backoff on failure.
   // Returns trace data as a map or error if all attempts fail.
   func getTraceFromLangfuse(traceID string) (map[string]interface{}, error) {
   ```

5. **JSDoc –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏** (TypeScript)
   ```typescript
   // ‚ùå –ù–ï–¢
   const extractTraceId = (): string | null => {
   
   // ‚úÖ –î–û–õ–ñ–ù–û –ë–´–¢–¨
   /**
    * Extracts trace ID from Langfuse URL.
    * Supports two formats:
    * - /traces/TRACE_ID
    * - /traces?peek=TRACE_ID
    * @returns Trace ID or null if not found
    */
   const extractTraceId = (): string | null => {
   ```

6. **Changelog**
   - –ù–µ—Ç –∏—Å—Ç–æ—Ä–∏–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–π
   - –°–ª–æ–∂–Ω–æ –ø–æ–Ω—è—Ç—å —á—Ç–æ –º–µ–Ω—è–ª–æ—Å—å

7. **Contributing guide**
   - –ù–µ—Ç –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π –¥–ª—è –∫–æ–Ω—Ç—Ä–∏–±—å—é—Ç–æ—Ä–æ–≤
   - –ù–µ—Ç code style guide

---

## üéØ –ü—Ä–∏–æ—Ä–∏—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Å–ø–∏—Å–æ–∫ –ø—Ä–æ–±–ª–µ–º

### üî¥ –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ï (—Ç—Ä–µ–±—É—é—Ç –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ–≥–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è)

| # | –ü—Ä–æ–±–ª–µ–º–∞ | –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –†–∏—Å–∫ | –£—Å–∏–ª–∏—è |
|---|----------|-----------|------|--------|
| 1 | –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —Ç–µ—Å—Ç–æ–≤ (0% coverage) | –û–±–∞ | –í—ã—Å–æ–∫–∏–π | 3-5 –¥–Ω–µ–π |
| 2 | –£—Ç–µ—á–∫–∞ —Ä–µ—Å—É—Ä—Å–æ–≤ (`defer` –≤ —Ü–∏–∫–ª–µ) | ai-back | –í—ã—Å–æ–∫–∏–π | 30 –º–∏–Ω |
| 3 | –ò–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—à–∏–±–∫–∏ `http.NewRequest` | ai-back | –°—Ä–µ–¥–Ω–∏–π | 10 –º–∏–Ω |
| 4 | –ì–ª–æ–±–∞–ª—å–Ω–∞—è –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è `aiClient` | ai-back | –°—Ä–µ–¥–Ω–∏–π | 2 —á–∞—Å–∞ |
| 5 | –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `any` –≤ —Ç–∏–ø–∞—Ö | crome-ext | –ù–∏–∑–∫–∏–π | 1 —á–∞—Å |

---

### üü° –í–ê–ñ–ù–´–ï (—É–ª—É—á—à–∞—Ç –∫–∞—á–µ—Å—Ç–≤–æ –∫–æ–¥–∞)

| # | –ü—Ä–æ–±–ª–µ–º–∞ | –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –£—Å–∏–ª–∏—è |
|---|----------|-----------|--------|
| 6 | –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ Clean Architecture —Å–ª–æ—ë–≤ | ai-back | 2-3 –¥–Ω—è |
| 7 | –ú–æ–Ω–æ–ª–∏—Ç–Ω—ã–π `injector.ts` (492 —Å—Ç—Ä–æ–∫–∏) | crome-ext | 1 –¥–µ–Ω—å |
| 8 | –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫ | –û–±–∞ | 4 —á–∞—Å–∞ |
| 9 | –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ graceful shutdown | ai-back | 2 —á–∞—Å–∞ |
| 10 | –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `alert()` –¥–ª—è –æ—à–∏–±–æ–∫ | crome-ext | 3 —á–∞—Å–∞ |
| 11 | –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è | ai-back | 4 —á–∞—Å–∞ |
| 12 | –•–∞—Ä–¥–∫–æ–¥ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ (–ø–æ—Ä—Ç, URL) | –û–±–∞ | 2 —á–∞—Å–∞ |

---

### üü¢ –ñ–ï–õ–ê–¢–ï–õ–¨–ù–´–ï (tech debt)

| # | –ü—Ä–æ–±–ª–µ–º–∞ | –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –£—Å–∏–ª–∏—è |
|---|----------|-----------|--------|
| 13 | –ù–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–π React –∫–æ–¥ | crome-ext | 1 —á–∞—Å |
| 14 | Inline —Å—Ç–∏–ª–∏ –≤ TypeScript | crome-ext | 2 —á–∞—Å–∞ |
| 15 | Polling URL –∫–∞–∂–¥—ã–µ 100ms | crome-ext | 3 —á–∞—Å–∞ |
| 16 | –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ Godoc/JSDoc –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤ | –û–±–∞ | 1 –¥–µ–Ω—å |
| 17 | –ú–∞–≥–∏—á–µ—Å–∫–∏–µ —á–∏—Å–ª–∞ –∏ —Å—Ç—Ä–æ–∫–∏ | ai-back | 2 —á–∞—Å–∞ |
| 18 | –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ error tracking | crome-ext | 4 —á–∞—Å–∞ |

---

## üìä –ú–µ—Ç—Ä–∏–∫–∏ –∫–∞—á–µ—Å—Ç–≤–∞ –∫–æ–¥–∞

| –ú–µ—Ç—Ä–∏–∫–∞ | ai-back/ | crome-ext/ | –¶–µ–ª–µ–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ |
|---------|----------|------------|------------------|
| **–¢–µ—Å—Ç–æ–≤–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ** | 0% üî¥ | 0% üî¥ | >70% |
| **Cyclomatic Complexity** | –í—ã—Å–æ–∫–∞—è üü° | –°—Ä–µ–¥–Ω—è—è üü° | <10 |
| **–î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞** | ~5% üü° | ~3% üü¢ | <3% |
| **–î–ª–∏–Ω–∞ —Ñ—É–Ω–∫—Ü–∏–π** | 2 >100 —Å—Ç—Ä–æ–∫ üî¥ | 2 >100 —Å—Ç—Ä–æ–∫ üî¥ | <50 —Å—Ç—Ä–æ–∫ |
| **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `any`** | N/A | 1 üü¢ | 0 |
| **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è** | 40% üü° | 30% üü° | >80% |
| **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫** | 60% üü° | 60% üü° | >90% |
| **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞** | 30% üî¥ | 50% üü° | >80% |

---

## üöÄ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ —É–ª—É—á—à–µ–Ω–∏—é

### –§–∞–∑–∞ 1: –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è (1 –Ω–µ–¥–µ–ª—è)

1. **–î–æ–±–∞–≤–∏—Ç—å unit —Ç–µ—Å—Ç—ã –¥–ª—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö —Ñ—É–Ω–∫—Ü–∏–π**
   - `handleAnalyzeRequest()`
   - `getTraceFromLangfuse()`
   - `extractTraceId()`
   - –¶–µ–ª—å: 50% coverage

2. **–ò—Å–ø—Ä–∞–≤–∏—Ç—å —É—Ç–µ—á–∫—É —Ä–µ—Å—É—Ä—Å–æ–≤**
   ```go
   // main.go, —Å—Ç—Ä–æ–∫–∞ 325
   resp, err := client.Do(req)
   if err != nil {
       lastErr = err
       continue
   }
   
   // ‚úÖ –ó–∞–∫—Ä—ã–≤–∞–µ–º —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
   func() {
       defer resp.Body.Close()
       // ... –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—Ç–≤–µ—Ç–∞
   }()
   ```

3. **–û–±—Ä–∞–±–æ—Ç–∞—Ç—å –æ—à–∏–±–∫—É —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–ø—Ä–æ—Å–∞**
   ```go
   req, err := http.NewRequest("GET", url, nil)
   if err != nil {
       return nil, fmt.Errorf("failed to create request: %w", err)
   }
   ```

4. **Dependency Injection –¥–ª—è aiClient**
   ```go
   type AnalyzeHandler struct {
       aiClient      ai.AIClient
       langfuseRepo  LangfuseRepository
   }
   
   func (h *AnalyzeHandler) Handle(c *gin.Context) {
       // ...
   }
   ```

---

### –§–∞–∑–∞ 2: –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã (2-3 –Ω–µ–¥–µ–ª–∏)

1. **–í–Ω–µ–¥—Ä–∏—Ç—å Clean Architecture –≤ ai-back/**
   - –°–æ–∑–¥–∞—Ç—å —Å–ª–æ–∏: handler, service, repository
   - –í—ã–¥–µ–ª–∏—Ç—å domain –º–æ–¥–µ–ª–∏
   - –î–æ–±–∞–≤–∏—Ç—å –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã –¥–ª—è –≤—Å–µ—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

2. **–†–∞–∑–±–∏—Ç—å –º–æ–Ω–æ–ª–∏—Ç–Ω—ã–µ —Ñ–∞–π–ª—ã**
   - `main.go` ‚Üí `cmd/server/main.go` + config + router
   - `injector.ts` ‚Üí –º–æ–¥—É–ª–∏ (ui/, api/, utils/)

3. **–¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫**
   - Middleware –¥–ª—è Go
   - Error boundary –¥–ª—è React
   - –ï–¥–∏–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –æ—à–∏–±–æ–∫

4. **–î–æ–±–∞–≤–∏—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ**
   ```go
   logger.Info("trace analysis started",
       zap.String("trace_id", traceID),
       zap.String("user_id", userID),
   )
   ```

---

### –§–∞–∑–∞ 3: –£–ª—É—á—à–µ–Ω–∏–µ –∫–∞—á–µ—Å—Ç–≤–∞ (1-2 –Ω–µ–¥–µ–ª–∏)

1. **–î–æ–≤–µ—Å—Ç–∏ —Ç–µ—Å—Ç–æ–≤–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ –¥–æ 70%+**
   - Integration —Ç–µ—Å—Ç—ã
   - E2E —Ç–µ—Å—Ç—ã –¥–ª—è —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è

2. **–î–æ–±–∞–≤–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é**
   - Godoc/JSDoc –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏
   - –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –¥–∏–∞–≥—Ä–∞–º–º—ã
   - OpenAPI —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è

3. **–ù–∞—Å—Ç—Ä–æ–∏—Ç—å CI/CD**
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∑–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤
   - Linting (golangci-lint, ESLint)
   - Code coverage reporting

4. **–î–æ–±–∞–≤–∏—Ç—å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥**
   - Prometheus –º–µ—Ç—Ä–∏–∫–∏ –¥–ª—è backend
   - Error tracking –¥–ª—è frontend (Sentry)

---

## üìà –û—Ü–µ–Ω–∫–∞ –≤—Ä–µ–º–µ–Ω–∏ –Ω–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ

| –§–∞–∑–∞ | –û–ø–∏—Å–∞–Ω–∏–µ | –í—Ä–µ–º—è | –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç |
|------|----------|-------|-----------|
| **–§–∞–∑–∞ 1** | –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è | 1 –Ω–µ–¥–µ–ª—è | üî¥ –í—ã—Å–æ–∫–∏–π |
| **–§–∞–∑–∞ 2** | –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã | 2-3 –Ω–µ–¥–µ–ª–∏ | üü° –°—Ä–µ–¥–Ω–∏–π |
| **–§–∞–∑–∞ 3** | –£–ª—É—á—à–µ–Ω–∏–µ –∫–∞—á–µ—Å—Ç–≤–∞ | 1-2 –Ω–µ–¥–µ–ª–∏ | üü¢ –ù–∏–∑–∫–∏–π |
| **–ò–¢–û–ì–û** | | 4-6 –Ω–µ–¥–µ–ª—å | |

---

## ‚úÖ –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

### –°–∏–ª—å–Ω—ã–µ —Å—Ç–æ—Ä–æ–Ω—ã –ø—Ä–æ–µ–∫—Ç–∞:
- ‚úÖ –†–∞–±–æ—Ç–∞—é—â–∏–π MVP
- ‚úÖ –û—Ç–ª–∏—á–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è (README)
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –¥–≤—É—Ö AI –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤
- ‚úÖ Retry –ª–æ–≥–∏–∫–∞ –¥–ª—è –≤–Ω–µ—à–Ω–∏—Ö API
- ‚úÖ TypeScript strict mode

### –û—Å–Ω–æ–≤–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã:
- ‚ùå –ü–æ–ª–Ω–æ–µ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —Ç–µ—Å—Ç–æ–≤ (0% coverage)
- ‚ùå –ù–∞—Ä—É—à–µ–Ω–∏–µ Clean Architecture –ø—Ä–∏–Ω—Ü–∏–ø–æ–≤
- ‚ùå –ú–æ–Ω–æ–ª–∏—Ç–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ (>100 —Å—Ç—Ä–æ–∫)
- ‚ùå –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –ª–æ–≥–∏–∫–∏ –º–µ–∂–¥—É –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º–∏
- ‚ùå –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ graceful shutdown
- ‚ùå –£—Ç–µ—á–∫–∏ —Ä–µ—Å—É—Ä—Å–æ–≤ –≤ Go

### –û–±—â–∞—è –æ—Ü–µ–Ω–∫–∞ –∫–∞—á–µ—Å—Ç–≤–∞: 5.5/10

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –ü—Ä–æ–µ–∫—Ç —Ç—Ä–µ–±—É–µ—Ç —Å–µ—Ä—å—ë–∑–Ω–æ–≥–æ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞ –ø–µ—Ä–µ–¥ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –≤ production. –ù–∞—á–Ω–∏—Ç–µ —Å –§–∞–∑—ã 1 (–∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è), –∑–∞—Ç–µ–º –ø–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ —É–ª—É—á—à–∞–π—Ç–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É.

---

**–°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:**
1. –°–æ–∑–¥–∞—Ç—å GitHub Issues –¥–ª—è –∫–∞–∂–¥–æ–π –ø—Ä–æ–±–ª–µ–º—ã –∏–∑ —Ä–∞–∑–¥–µ–ª–∞ "–ü—Ä–∏–æ—Ä–∏—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Å–ø–∏—Å–æ–∫"
2. –ù–∞—á–∞—Ç—å —Å –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –ø—Ä–æ–±–ª–µ–º (#1-5)
3. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å CI/CD —Å –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–º –∑–∞–ø—É—Å–∫–æ–º —Ç–µ—Å—Ç–æ–≤
4. –ó–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞—Ç—å —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã

---

*–ê–Ω–∞–ª–∏–∑ –≤—ã–ø–æ–ª–Ω–µ–Ω: 2026-01-24*  
*–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç: AI Code Analyzer*  
*–í–µ—Ä—Å–∏—è –æ—Ç—á—ë—Ç–∞: 1.0*
